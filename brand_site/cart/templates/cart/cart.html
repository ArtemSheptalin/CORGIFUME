{% extends "base.html" %}
{% load static %}

{% block title %}
  Корзина покупок
{% endblock %}

{% block content %}
<div class="cartMainBlock">
  <h1 style="font-size: 25px;margin-left:20px;">Корзина покупок</h1>
  {% if cart|length > 0 %}
    <table>
      <tr>
        <td class="tdHeader">Товар</td>
        <td class="tdHeader">Цена</td>
        <td class="tdHeader">Кол-во</td>
        <td class="tdHeader">Итого</td>
      </tr>
      {% for item in cart %}
      <tr>
        <td class="tdContent">{{ item.product }}</td>
        <td class="tdContent">{{ item.price }}₽</td>
        <td class="tdContent">
          <div class="amountSection">
            <form action="{% url 'remove_cart' %}" method="post" style="margin-right:10px">
              {{ item.update_quantity_form.quantity }}
              {{ item.update_quantity_form.update }}
              <input type="submit" value="-" class="decreaseAmount">
              {% csrf_token %}
            </form>
            {{ item.quantity }}
            <form action="{% url 'add_cart' %}" method="post" style="margin-left:10px">
              {{ item.update_quantity_form.quantity }}
              {{ item.update_quantity_form.update }}
              <input type="submit" value="+" class="increaseAmount">
              {% csrf_token %}
            </form>
          </div>
          
        </td>
        <td class="tdContent">{{ item.total_price }}₽</td>
      </tr>
      {% endfor %}
    </table>
        {% comment %} {% if user.is_authenticared %} {% endcomment %}
            <div class='createOrderBlock'>
              <a href={% url 'order:order-create' %} class="sign-in order-btn">Оформить заказ</a>
            </div>
        {% comment %} {% else %}
            <div class='createOrderBlock'>
              <a href={% url 'users:login' %} class="sign-in order-btn">Оформить заказ</a>
          </div>
        {% endif %} {% endcomment %}

  {% else %}
  <hr>
  <div class="emptyCart">
    <div class="cartHeader">
      <h1 class="emptyCartHeader">В вашей корзине пока нет продуктов...</h1>
      <p class="cartParag">
        <a class="itm-btn cartBtn" href={% url 'main_page' %}>ПЕРЕЙТИ К ПОКУПКАМ</a>
      </p>
    </div>
  </div>


  <div class="cartOffer">
    <div class="container">
      <p class="cartSpecialOffer">Ознакомьтесь с самыми выгодными предложениями нашего магазина:</p>
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
          <div class="col">
              <div class="card shadow-sm">
                  <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c"></rect><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>
                  <div class="card-body">
                      <p class="card-text">Разглаживающий крем для вьющихся волос Camille Rose Naturals Fresh Curl поможет с легкостью уложить кудрявые волосы.</p>
                      <div class="d-flex justify-content-between align-items-center">
                          <div class="btn-group">
                              <button type="button" class="btn btn-sm btn-outline-secondary">Купить</button>
                              <button type="button" class="btn btn-sm btn-outline-secondary">В корзину</button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>

          <div class="col">
              <div class="card shadow-sm">
                  <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c"></rect><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>
                  <div class="card-body">
                      <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                      <div class="d-flex justify-content-between align-items-center">
                          <div class="btn-group">
                              <button type="button" class="btn btn-sm btn-outline-secondary">Купить</button>
                              <button type="button" class="btn btn-sm btn-outline-secondary">В корзину</button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
              
          <div class="col">
              <div class="card shadow-sm">
                  <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c"></rect><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>
                  <div class="card-body">
                      <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                      <div class="d-flex justify-content-between align-items-center">
                          <div class="btn-group">
                              <button type="button" class="btn btn-sm btn-outline-secondary">Купить</button>
                              <button type="button" class="btn btn-sm btn-outline-secondary">В корзину</button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
        </div>
      </div>
  </div>
  
  {% endif %}
  
{% endblock %}
